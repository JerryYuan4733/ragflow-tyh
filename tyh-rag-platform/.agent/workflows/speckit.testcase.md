---
description: ⑧ 测试用例 - 生成功能测试用例文档，定义验收场景和测试步骤。
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## 流程概述

本工作流对应开发流程 **⑧ 测试用例生成**，产出物为 `{功能}-测试用例.md`，归档至 `docs/test/`。

### 步骤

1. **识别当前功能**：
   - 获取当前分支名
   - 在 `.specify/specs/` 中找到对应文档

2. **加载上下文**：
   - 读取需求规格 `spec.md`
   - 读取产品设计 `product.md`
   - 读取架构设计 `architecture.md`
   - 读取 `.specify/memory/constitution.md`

3. **分析测试需求**：
   - 从需求规格提取功能点
   - 从产品设计提取用户流程
   - 识别边界条件和异常场景

4. **生成测试用例**：
   
   ### 用例分类
   - **冒烟测试**：核心流程验证
   - **功能测试**：详细功能验证
   - **边界测试**：边界条件验证
   - **异常测试**：错误处理验证
   - **兼容性测试**：多环境验证

5. **保存并归档**：
   - 写入 `.specify/specs/<feature>/testcase.md`（工作副本）
   - 归档到 `docs/test/{功能}-测试用例.md`

6. **报告**：输出测试用例数量、覆盖的需求点

## 产出物模板

```markdown
# {功能名称} - 测试用例

## 测试概述

| 项目 | 说明 |
|------|------|
| 功能模块 | {功能名称} |
| 需求版本 | V{版本} |
| 用例数量 | {数量} |
| 编写日期 | {日期} |

## 测试范围

### 覆盖需求
- [ ] REQ-001: {需求描述}
- [ ] REQ-002: {需求描述}

### 不测试范围
- {明确说明不测试的内容}

## 测试用例

### TC-001: {用例名称}

| 属性 | 值 |
|------|------|
| 优先级 | P0/P1/P2 |
| 类型 | 冒烟/功能/边界/异常 |
| 关联需求 | REQ-XXX |

**前置条件**：
1. {条件1}
2. {条件2}

**测试步骤**：
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | {操作描述} | {预期结果} |
| 2 | {操作描述} | {预期结果} |

**测试数据**：
```json
{
  "input": {},
  "expected": {}
}
```

---

### TC-002: {用例名称}
...
```

## Key Rules

- 每条需求至少有一个对应测试用例
- 测试步骤必须清晰可执行
- 预期结果必须明确可验证
- P0 用例必须全部通过才能发布
- **必须归档到 `docs/test/`**
