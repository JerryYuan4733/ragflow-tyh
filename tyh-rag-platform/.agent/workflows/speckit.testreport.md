---
description: ⑨ 测试报告 - 生成测试执行报告，记录测试结果和缺陷跟踪。
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## 流程概述

本工作流对应开发流程 **⑨ 功能测试覆盖**，产出物为 `{功能}-测试报告.md`，归档至 `docs/test/`。

### 步骤

1. **识别当前功能**：
   - 获取当前分支名
   - 在 `.specify/specs/` 中找到对应文档

2. **加载上下文**：
   - 读取测试用例 `testcase.md`
   - 读取单元测试覆盖率报告
   - 读取 `.specify/memory/constitution.md`

3. **执行测试**：
   - 按测试用例逐条执行
   - 记录通过/失败状态
   - 记录发现的缺陷

4. **生成测试报告**：
   
   ### 报告内容
   - **测试概要**：执行时间、环境、版本
   - **测试结果**：通过率、失败用例
   - **覆盖率**：单元测试覆盖率
   - **缺陷清单**：发现的 Bug
   - **风险评估**：遗留问题和建议

5. **保存并归档**：
   - 写入 `.specify/specs/<feature>/testreport.md`（工作副本）
   - 归档到 `docs/test/{功能}-测试报告.md`

6. **报告**：输出通过率、关键缺陷、发布建议

## 产出物模板

```markdown
# {功能名称} - 测试报告

## 测试概要

| 项目 | 说明 |
|------|------|
| 功能模块 | {功能名称} |
| 测试版本 | V{版本} |
| 测试环境 | {环境描述} |
| 执行日期 | {日期} |
| 执行人员 | {人员} |

## 测试结果

### 总体统计

| 指标 | 数值 |
|------|------|
| 用例总数 | {总数} |
| 通过数 | {通过} |
| 失败数 | {失败} |
| 阻塞数 | {阻塞} |
| 通过率 | {百分比}% |

### 分类统计

| 类型 | 总数 | 通过 | 失败 | 通过率 |
|------|------|------|------|--------|
| 冒烟测试 | ... | ... | ... | ...% |
| 功能测试 | ... | ... | ... | ...% |
| 边界测试 | ... | ... | ... | ...% |

## 覆盖率报告

| 指标 | 数值 | 目标 | 状态 |
|------|------|------|------|
| 行覆盖率 | ...% | 80% | ✅/❌ |
| 分支覆盖率 | ...% | 70% | ✅/❌ |
| 函数覆盖率 | ...% | 90% | ✅/❌ |

## 缺陷清单

### BUG-001: {缺陷标题}

| 属性 | 值 |
|------|------|
| 严重级别 | Critical/Major/Minor |
| 关联用例 | TC-XXX |
| 状态 | Open/Fixed/Verified |
| 发现日期 | {日期} |

**重现步骤**：
1. {步骤}

**实际结果**：{描述}

**预期结果**：{描述}

---

## 风险评估

### 遗留风险
- {风险描述}

### 发布建议
- [ ] 建议发布 / [ ] 不建议发布

**理由**：{说明}
```

## Key Rules

- 所有 P0 用例必须通过
- 覆盖率必须达标（> 80%）
- 严重缺陷必须修复
- 发布建议必须有明确理由
- **必须归档到 `docs/test/`**
